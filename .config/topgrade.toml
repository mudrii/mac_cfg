# Topgrade configuration - macOS (optimized)
# Backup: topgrade.toml.bak

[misc]
# Cache sudo credentials upfront to avoid mid-run password prompts
pre_sudo = true

# Fully unattended - no confirmation prompts
assume_yes = true

# Reduce output noise
show_skipped = false

# Clean up temporary or old files after upgrades
cleanup = true

# Allowlist: only run these steps (future-proof against new topgrade steps)
only = [
  "self_update",
  "system",
  "brew_formula",
  "brew_cask",
  "mas",
  "vscode",
  "cursor",
  "tmux",
  "node",
  "yarn",
  "pnpm",
  "pipx",
  "pip3",
  "uv",
  "gcloud",
  "containers",
  "firmware",
  "github_cli_extensions",
  "tldr",
  "yazi",
  "custom_commands",
]

# Tolerate failures in steps that are flaky or network-dependent
ignore_failures = ["firmware", "containers", "gcloud", "uv"]

[brew]
# greedy_cask is a superset of greedy_latest and greedy_auto_updates
greedy_cask = true
autoremove = true

[firmware]
upgrade = true

[containers]
# Specify the runtime to use (docker is default; change to "podman" if preferred)
# runtime = "docker"

[post_commands]
"Brew Doctor" = "brew doctor 2>&1 || true"
